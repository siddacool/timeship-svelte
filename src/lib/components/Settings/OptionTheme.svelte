<script lang="ts">
  import { settings } from '$lib/stores/settings';

  import { SettingsThemes, type SettingsTheme } from '$lib/types';

  import SwitchButton from '../ui/SwitchButton.svelte';
  import SwitchButtonSection from '../ui/SwitchButtonSection.svelte';
  import ListOption from './ListOption.svelte';

  let active: number = $settings.theme;

  const onSwitch = (e: { detail: { value: SettingsTheme } }) => {
    const { detail } = e;
    const { value = SettingsThemes.auto } = detail;

    active = value;

    settings.setTheme(value);
  };
</script>

<ListOption title="Theme">
  <SwitchButton {active} total={3}>
    <SwitchButtonSection value={SettingsThemes.auto} on:switch={onSwitch} {active}>
      <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"
        ><path
          d="m12 23.4-3.375-3.325h-4.7v-4.7L.6 12l3.325-3.375v-4.7h4.7L12 .6l3.375 3.325h4.7v4.7L23.4 12l-3.325 3.375v4.7h-4.7Zm0-5.6q2.425 0 4.113-1.687Q17.8 14.425 17.8 12q0-2.425-1.687-4.113Q14.425 6.2 12 6.2Zm0 2.4 2.425-2.4H17.8v-3.375L20.225 12 17.8 9.575V6.2h-3.375L12 3.775 9.575 6.2H6.2v3.375L3.8 12l2.4 2.425V17.8h3.375Zm0-8.2Z"
        /></svg
      >
    </SwitchButtonSection>
    <SwitchButtonSection value={SettingsThemes.light} on:switch={onSwitch} {active}>
      <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24">
        <path
          d="M12 5.1q-.475 0-.812-.338-.338-.337-.338-.812v-2q0-.475.338-.8.337-.325.812-.325.475 0 .812.325.338.325.338.8v2q0 .475-.338.812-.337.338-.812.338Zm4.875 2.025q-.3-.325-.3-.8 0-.475.3-.8l1.4-1.425q.35-.325.825-.325t.8.325q.325.325.325.8 0 .475-.325.8l-1.425 1.425q-.325.3-.8.3-.475 0-.8-.3Zm3.175 6.025q-.475 0-.812-.338-.338-.337-.338-.812 0-.475.338-.812.337-.338.812-.338h2q.475 0 .8.338.325.337.325.812 0 .475-.325.812-.325.338-.8.338ZM12 23.175q-.475 0-.812-.325-.338-.325-.338-.8v-2q0-.475.338-.813.337-.337.812-.337.475 0 .812.337.338.338.338.813v2q0 .475-.338.8-.337.325-.812.325ZM5.525 7.125 4.1 5.725q-.35-.35-.35-.825t.35-.8q.325-.325.8-.325.475 0 .8.325l1.425 1.425q.325.325.325.8 0 .475-.325.8-.35.3-.813.3-.462 0-.787-.3ZM18.275 19.9l-1.4-1.425q-.3-.325-.3-.8 0-.475.3-.8.325-.325.788-.325.462 0 .812.325l1.425 1.4q.35.325.338.8-.013.475-.338.825t-.812.35q-.488 0-.813-.35ZM1.95 13.15q-.475 0-.8-.338Q.825 12.475.825 12q0-.475.325-.812.325-.338.8-.338h2q.475 0 .813.338.337.337.337.812 0 .475-.337.812-.338.338-.813.338ZM4.1 19.9q-.325-.325-.325-.8 0-.475.325-.8l1.425-1.425q.325-.325.787-.325.463 0 .813.325.35.35.35.813 0 .462-.35.812l-1.4 1.4q-.35.35-.825.35t-.8-.35Zm7.9-1.95q-2.475 0-4.212-1.738Q6.05 14.475 6.05 12q0-2.475 1.738-4.213Q9.525 6.05 12 6.05q2.475 0 4.212 1.737Q17.95 9.525 17.95 12t-1.738 4.212Q14.475 17.95 12 17.95Zm0-2.275q1.525 0 2.6-1.075 1.075-1.075 1.075-2.6 0-1.525-1.075-2.6-1.075-1.075-2.6-1.075-1.525 0-2.6 1.075-1.075 1.075-1.075 2.6 0 1.525 1.075 2.6 1.075 1.075 2.6 1.075Z"
        />
      </svg>
    </SwitchButtonSection>
    <SwitchButtonSection value={SettingsThemes.dark} on:switch={onSwitch} {active}>
      <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24">
        <path
          d="M12 21.1q-3.8 0-6.45-2.65Q2.9 15.8 2.9 12q0-3.775 2.662-6.438Q8.225 2.9 12 2.9q.325 0 .65.025T13.3 3q-.95.75-1.525 1.875T11.2 7.3q0 2.3 1.6 3.9t3.9 1.6q1.325 0 2.45-.563 1.125-.562 1.85-1.512.05.3.075.625.025.325.025.65 0 3.775-2.662 6.438Q15.775 21.1 12 21.1Zm0-2.275q2.05 0 3.7-1.1 1.65-1.1 2.45-2.875-.425.1-.862.162-.438.063-.888.038-3.05-.1-5.2-2.225Q9.05 10.7 8.95 7.6q0-.45.05-.888.05-.437.15-.862-1.775.8-2.875 2.45-1.1 1.65-1.1 3.7 0 2.825 2 4.825t4.825 2Zm-.325-6.5Z"
        />
      </svg>
    </SwitchButtonSection>
  </SwitchButton>
</ListOption>
